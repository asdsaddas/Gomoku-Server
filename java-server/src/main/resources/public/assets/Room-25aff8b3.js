import{d as l,n as d,p as u,_ as c,c as a,a as o,F as h,k as f,t as s,o as m}from"./index-fad142bf.js";import{m as g}from"./messageBox-e7b00418.js";const v=l({data:()=>({roomId:0,username:"",hostname:"",username1:"",username2:"",content:"",board:[],win:!1,timer:""}),async created(){const t=this.$route.query,i=(await d({roomId:Number(t.roomId)})).data[0];this.roomId=Number(t.roomId),this.username=t.username.toString(),this.hostname=i.hostname.toString(),this.username1=i.username1.toString(),i.username2!=null&&(this.username2=i.username2.toString()),this.content=i.content.toString(),this.board=this.content.split("")},mounted(){this.timer=setInterval(this.upDate,1e3)},beforeDestroy(){clearInterval(this.timer)},methods:{async upDate(){if(this.win)return;let t=(await d({roomId:this.roomId})).data[0];console.log(t),console.log(t.username2),t!=null&&(this.roomId=Number(t.roomId),this.hostname=t.hostname.toString(),this.username1=t.username1.toString(),this.username2=t.username2.toString(),this.content=t.content.toString());for(let i=0;i<19;i++)for(let e=0;e<19;e++)this.content[i*19+e]=="1"?document.getElementById(`point${i}-${e}`).innerHTML="<img class='image' src='../src/assets/img/blackGo.png'>":this.content[i*19+e]=="2"&&(document.getElementById(`point${i}-${e}`).innerHTML="<img class='image' src='../src/assets/img/whiteGo.png'>");this.Check()},async click(t,i){if(this.win)return;let e=0;for(let n=0;n<this.content.length;n++)this.content[n]!="0"&&e++;if(this.username==this.username1&&e%2==1||this.username==this.username2&&e%2==0){g(this,"现在不该你行棋！");return}else{if(this.content[t*19+i]!="0")return;{let n=this.hostname==this.username?"1":"2";this.content=this.content.slice(0,t*19+i)+n+this.content.slice(t*19+i+1),document.getElementById(`point${t}-${i}`).innerHTML=this.hostname==this.username?"<img class='image' src='../src/assets/img/blackGo.png'>":"<img class='image' src='../src/assets/img/whiteGo.png'>",(await u({roomId:this.roomId,content:this.content})).data}}this.Check()},Check(){let t=[];for(let e=0;e<19;e++){let n=this.content.substring(e*19,e*19+19).split("");t.push(n)}console.log(t);for(let e=0;e<19;e++)for(let n=0;n<15;n++)if(t[e][n]=="1"&&t[e][n+1]=="1"&&t[e][n+2]=="1"&&t[e][n+3]=="1"&&t[e][n+4]=="1"){var i=document.getElementById("information");i.innerHTML+="<div id='win'>黑方胜</div>",this.win=!0;return}else if(t[e][n]=="2"&&t[e][n+1]=="2"&&t[e][n+2]=="2"&&t[e][n+3]=="2"&&t[e][n+4]=="2"){var i=document.getElementById("information");i.innerHTML+="<div id='win'>白方胜</div>",this.win=!0;return}for(let e=0;e<15;e++)for(let n=0;n<19;n++)if(t[e][n]=="1"&&t[e+1][n]=="1"&&t[e+2][n]=="1"&&t[e+3][n]=="1"&&t[e+4][n]=="1"){var i=document.getElementById("information");i.innerHTML+="<div id='win'>黑方胜</div>",this.win=!0;return}else if(t[e][n]=="2"&&t[e+1][n]=="2"&&t[e+2][n]=="2"&&t[e+3][n]=="2"&&t[e+4][n]=="2"){var i=document.getElementById("information");i.innerHTML+="<div id='win'>白方胜</div>",this.win=!0;return}for(let e=0;e<15;e++)for(let n=0;n<15;n++)if(t[e][n]=="1"&&t[e+1][n+1]=="1"&&t[e+2][n+2]=="1"&&t[e+3][n+3]=="1"&&t[e+4][n+4]=="1"){var i=document.getElementById("information");i.innerHTML+="<div id='win'>黑方胜</div>",this.win=!0;return}else if(t[e][n]=="2"&&t[e+1][n+1]=="2"&&t[e+2][n+2]=="2"&&t[e+3][n+3]=="2"&&t[e+4][n+4]=="2"){var i=document.getElementById("information");i.innerHTML+="<div id='win'>白方胜</div>",this.win=!0;return}for(let e=4;e<19;e++)for(let n=0;n<15;n++)if(t[e][n]=="1"&&t[e-1][n+1]=="1"&&t[e-2][n+2]=="1"&&t[e-3][n+3]=="1"&&t[e-4][n+4]=="1"){var i=document.getElementById("information");i.innerHTML+="<div id='win'>黑方胜</div>",this.win=!0;return}else if(t[e][n]=="2"&&t[e-1][n+1]=="2"&&t[e-2][n+2]=="2"&&t[e-3][n+3]=="2"&&t[e-4][n+4]=="2"){var i=document.getElementById("information");i.innerHTML+="<div id='win'>白方胜</div>",this.win=!0;return}}}});const p={id:"container"},I={id:"board"},w=["id","onClick"],_={id:"information"},E={id:"roomId"},B={id:"host"},y={id:"players"};function $(t,i,e,n,M,L){return m(),a("div",p,[o("div",I,[(m(!0),a(h,null,f(t.board,(b,r)=>(m(),a("div",{key:r,class:"grid",id:`point${Math.floor(r/19)}-${r%19}`,onClick:H=>t.click(Math.floor(r/19),r%19)},null,8,w))),128))]),o("div",_,[o("div",null,"欢迎您:"+s(t.username)+"!",1),o("div",E,s(t.roomId)+"号房",1),o("div",B,"房主:"+s(t.hostname),1),o("div",y,s(t.username1)+" VS "+s(t.username2),1)])])}const k=c(v,[["render",$]]);export{k as default};
